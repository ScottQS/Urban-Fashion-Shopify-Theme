{% liquid
  if image == blank
    break
  endif

  assign image_width = width | default: image.width
  assign image_height = height
  assign image_sizes = sizes | default: '100vw'
  assign image_loading = loading | default: 'lazy'
  assign image_alt = image.alt | default: ''

  if url
    assign wrapper = 'a'
  else
    assign wrapper = 'div'
  endif
%}

<{{ wrapper }}
  class="image {{ class }}"
  {% if url %}
    href="{{ url }}"
  {% endif %}
>
  {{
    image
    | image_url: width: image_width, height: image_height, crop: crop
    | image_tag:
      widths: '240,360,480,720,960,1200,1440,1680,1920',
      sizes: image_sizes,
      loading: image_loading,
      alt: image_alt
  }}
</{{ wrapper }}>

{% stylesheet %}
  .image {
    display: block;
    width: 100%;
  }

  .image img {
    width: 100%;
    height: auto;
  }
{% endstylesheet %}
