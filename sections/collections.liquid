<section class="section-shell">
  <h1>Collections</h1>

  {% paginate collections by section.settings.collections_per_page %}
    <div
      class="collections {{ section.settings.grid_item_width }}"
      style="--grid-gap: {{ section.settings.grid_gap }}px"
    >
      {% for collection in collections %}
        <a class="collection-card card" href="{{ collection.url }}">
          {% if collection.featured_image %}
            {% render
              'image',
              class: 'collection-card__image',
              image: collection.featured_image,
              width: 1000,
              height: 1000,
              crop: 'center',
              sizes: '(min-width: 990px) 33vw, (min-width: 750px) 50vw, 100vw'
            %}
          {% endif %}

          <div class="collection-card__content card__content">
            <h2>{{ collection.title }}</h2>
            {% if collection.description %}
              <p>{{ collection.description | strip_html | truncatewords: 18 }}</p>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </div>

    {% if paginate.pages > 1 %}
      <nav class="pagination" role="navigation" aria-label="Pagination">
        {{ paginate | default_pagination }}
      </nav>
    {% endif %}
  {% endpaginate %}
</section>

{% stylesheet %}
  .collections {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(var(--collection-card-size), 100%), 1fr));
    gap: var(--grid-gap);
  }

  .collections--compact {
    --collection-card-size: 180px;
  }

  .collections--full {
    --collection-card-size: 300px;
  }

  .collection-card {
    text-decoration: none;
    color: inherit;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Collection list",
  "settings": [
    {
      "type": "select",
      "id": "grid_item_width",
      "label": "Grid item width",
      "options": [
        {
          "value": "collections--compact",
          "label": "Compact"
        },
        {
          "value": "collections--full",
          "label": "Large"
        }
      ],
      "default": "collections--full"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "Grid gap",
      "min": 8,
      "max": 40,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "collections_per_page",
      "label": "Collections per page",
      "min": 6,
      "max": 24,
      "step": 3,
      "default": 12
    }
  ],
  "presets": [
    {
      "name": "Collection list"
    }
  ]
}
{% endschema %}
