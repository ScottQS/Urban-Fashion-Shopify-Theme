{% liquid
  assign has_menu_links = false
  if section.settings.menu != blank and section.settings.menu.links.size > 0
    assign has_menu_links = true
  endif
%}

<header class="streetwear-header full-width">
  <div class="streetwear-header__inner">
    <details class="streetwear-header__menu">
      <summary aria-label="Open menu">
        <span></span>
        <span></span>
        <span></span>
      </summary>

      <nav class="streetwear-header__menu-panel" aria-label="Main menu">
        {% if has_menu_links %}
          {% for link in section.settings.menu.links %}
            {{ link.title | link_to: link.url }}
          {% endfor %}
        {% else %}
          {{ 'Shop all' | link_to: routes.all_products_collection_url }}
          {{ 'Collections' | link_to: routes.collections_url }}
        {% endif %}
      </nav>
    </details>

    <h2 class="streetwear-header__title">
      <a href="{{ routes.root_url }}" class="streetwear-header__logo-link">
        {% if section.settings.logo_image %}
          {{
            section.settings.logo_image
            | image_url: width: section.settings.logo_width
            | image_tag:
              widths: '90,120,150,180,210,240,270,300',
              sizes: '(max-width: 749px) 140px, 220px',
              class: 'streetwear-header__logo'
          }}
        {% else %}
          {{ shop.name }}
        {% endif %}
      </a>
    </h2>

    <div class="streetwear-header__icons">
      <a href="{{ routes.search_url }}" aria-label="Search">
        {{ 'icon-search.svg' | inline_asset_content }}
      </a>

      {% if shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" aria-label="Account">
          {{ 'icon-account.svg' | inline_asset_content }}
        </a>
      {% endif %}

      <a href="{{ routes.cart_url }}" aria-label="Cart">
        {% if cart.item_count > 0 %}
          <sup>{{ cart.item_count }}</sup>
        {% endif %}

        {{ 'icon-cart.svg' | inline_asset_content }}
      </a>
    </div>
  </div>
</header>

{% stylesheet %}
  .streetwear-header {
    position: sticky;
    top: 0;
    z-index: 30;
    border-bottom: 1px solid rgba(255, 255, 255, 0.12);
    background: rgba(7, 9, 14, 0.9);
    color: #f4f4ff;
    backdrop-filter: blur(8px);
  }

  .streetwear-header__inner {
    display: grid;
    grid-template-columns: 48px 1fr auto;
    align-items: center;
    gap: 0.8rem;
    margin: 0 auto;
    max-width: min(1200px, calc(100% - var(--page-margin) * 2));
    min-height: 4.3rem;
    width: 100%;
  }

  .streetwear-header a {
    color: inherit;
    text-decoration: none;
  }

  .streetwear-header__title {
    margin: 0;
    display: flex;
    justify-content: center;
    font-size: 1.1rem;
    letter-spacing: 0.08em;
    line-height: 1;
    text-transform: uppercase;
    text-align: center;
  }

  .streetwear-header__logo-link {
    display: inline-flex;
    align-items: center;
  }

  .streetwear-header__logo {
    max-width: 100%;
    height: auto;
  }

  .streetwear-header__menu {
    position: relative;
  }

  .streetwear-header__menu summary {
    position: relative;
    cursor: pointer;
    list-style: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.2rem;
    height: 2.2rem;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.28);
    background: rgba(255, 255, 255, 0.04);
  }

  .streetwear-header__menu summary::-webkit-details-marker {
    display: none;
  }

  .streetwear-header__menu summary span {
    position: absolute;
    width: 0.95rem;
    height: 2px;
    background: currentcolor;
    border-radius: 2px;
  }

  .streetwear-header__menu summary span:nth-child(1) {
    transform: translateY(-4px);
  }

  .streetwear-header__menu summary span:nth-child(3) {
    transform: translateY(4px);
  }

  .streetwear-header__menu[open] summary span:nth-child(1) {
    transform: rotate(45deg);
  }

  .streetwear-header__menu[open] summary span:nth-child(2) {
    opacity: 0;
  }

  .streetwear-header__menu[open] summary span:nth-child(3) {
    transform: rotate(-45deg);
  }

  .streetwear-header__menu-panel {
    position: absolute;
    top: calc(100% + 0.55rem);
    left: 0;
    min-width: 220px;
    display: grid;
    border-radius: 0.8rem;
    border: 1px solid rgba(255, 255, 255, 0.16);
    background: rgba(12, 14, 21, 0.98);
    box-shadow: 0 22px 40px rgba(0, 0, 0, 0.35);
    overflow: hidden;
  }

  .streetwear-header__menu-panel a {
    padding: 0.8rem 1rem;
    font-size: 0.86rem;
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    border-bottom: 1px solid rgba(255, 255, 255, 0.12);
  }

  .streetwear-header__menu-panel a:last-child {
    border-bottom: 0;
  }

  .streetwear-header__menu-panel a:hover {
    background: rgba(111, 63, 245, 0.2);
  }

  .streetwear-header__icons {
    --icon-stroke-width: 1.6;
    display: inline-flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0.65rem;
  }

  .streetwear-header__icons a {
    position: relative;
    display: inline-flex;
    width: 1.4rem;
    height: 1.4rem;
  }

  .streetwear-header__icons svg {
    width: 100%;
    height: auto;
  }

  .streetwear-header__icons a sup {
    position: absolute;
    top: -0.55rem;
    right: -0.55rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 1rem;
    height: 1rem;
    padding: 0 0.2rem;
    border-radius: 999px;
    background: #6f3ff5;
    font-size: 0.63rem;
    font-weight: 700;
    line-height: 1;
    color: #ffffff;
  }

  @media (min-width: 750px) {
    .streetwear-header__inner {
      grid-template-columns: auto 1fr auto;
      min-height: 4.8rem;
      gap: 1rem;
    }

    .streetwear-header__title {
      justify-content: flex-start;
      text-align: left;
      font-size: 1.22rem;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    },
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo image"
    },
    {
      "type": "range",
      "id": "logo_width",
      "label": "Logo width",
      "min": 80,
      "max": 300,
      "step": 10,
      "unit": "px",
      "default": 170
    }
  ]
}
{% endschema %}
